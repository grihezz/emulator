; Вариант 9. Сумма элементов массива (оптимизированная версия с регистрами)
; Массив из N элементов начинается с адреса 300.
; Формат хранения: [размер, элемент0, элемент1, ...].
; Результат сохраняется в ячейке 100.

START:
    LOAD #0
    STORE R1         ; накопленная сумма (используем R1)
    STORE R2         ; индекс i = 0 (используем R2)
    
    LOAD #300
    STORE 102        ; базовый адрес в память
    STORE R3         ; также в регистр
    
    LOAD (102)
    STORE R4         ; размер массива

LOOP:
    LOAD R2          ; текущий индекс
    CMP R4           ; сравнение с размером
    JZ END           ; если i == size, завершаем
    
    ; Вычисляем адрес элемента
    LOAD 102         ; базовый адрес
    ADD #1           ; пропускаем размер
    ADD R2           ; прибавляем индекс
    STORE 104        ; адрес элемента
    
    ; Загружаем элемент и добавляем к сумме
    LOAD (104)
    ADD R1           ; добавляем к текущей сумме
    STORE R1         ; сохраняем новую сумму
    
    ; Увеличиваем индекс
    LOAD R2
    ADD #1
    STORE R2         ; i += 1
    JMP LOOP

END:
    ; Сохраняем результат в память
    LOAD R1
    STORE 100
    HALT

