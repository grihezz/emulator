; Пример использования регистров общего назначения
; Демонстрация кэширования данных в регистрах для избежания частых обращений к ОЗУ

START:
    ; Загружаем данные в регистры
    LOAD #10         ; загружаем 10 в ACC (R0)
    STORE R1         ; сохраняем в R1
    LOAD #20
    STORE R2         ; сохраняем в R2

    LOAD R1          ; загружаем из R1 (без обращения к ОЗУ!)
    ADD R2           ; добавляем R2 (без обращения к ОЗУ!)
    STORE R3         ; сохраняем результат в R3
    
    ; Умножение через сложение (используем R4 как счетчик)
    LOAD R2          ; загружаем множитель
    STORE R5         ; сохраняем множитель для повторного использования
    
    LOAD #0          ; начинаем с 0
    STORE R4         ; результат умножения
    LOAD #5          ; сколько раз повторяем
    STORE R6         ; счетчик
    
MULT_LOOP:
    LOAD R6          ; проверяем счетчик
    JZ MULT_DONE     ; если 0, закончили
    
    LOAD R4          ; текущая сумма
    ADD R5           ; добавляем множитель (из регистра!)
    STORE R4         ; сохраняем результат
    
    LOAD R6          ; уменьшаем счетчик
    SUB #1
    STORE R6
    
    JMP MULT_LOOP
    
MULT_DONE:
    ; Результат умножения 20*5 = 100 теперь в R4
    LOAD R4
    STORE 200        ; сохраняем в память для проверки
    
    HALT
